<idea-plugin visibility="internal">
  <!-- region Generated dependencies - run `Generate Product Layouts` to regenerate -->
  <dependencies>
    <module name="fleet.rpc"/>
    <module name="fleet.util.core"/>
    <module name="intellij.libraries.fastutil"/>
    <module name="intellij.libraries.jackson"/>
    <module name="intellij.libraries.jackson.databind"/>
    <module name="intellij.libraries.kotlinx.coroutines.core"/>
    <module name="intellij.libraries.kotlinx.serialization.core"/>
    <module name="intellij.libraries.stream"/>
    <module name="intellij.platform.analysis"/>
    <module name="intellij.platform.core"/>
    <module name="intellij.platform.core.impl"/>
    <module name="intellij.platform.core.ui"/>
    <module name="intellij.platform.debugger"/>
    <module name="intellij.platform.debugger.impl.rpc"/>
    <module name="intellij.platform.debugger.impl.shared"/>
    <module name="intellij.platform.diff"/>
    <module name="intellij.platform.ide.core"/>
    <module name="intellij.platform.ide.impl"/>
    <module name="intellij.platform.lang"/>
    <module name="intellij.platform.lang.core"/>
    <module name="intellij.platform.lang.impl"/>
    <module name="intellij.platform.projectModel"/>
    <module name="intellij.platform.rpc"/>
    <module name="intellij.platform.rpc.topics"/>
    <module name="intellij.platform.util.ex"/>
  </dependencies>
  <!-- endregion -->

  <applicationListeners>
    <listener topic="com.intellij.openapi.project.ProjectManagerListener"
              class="com.intellij.xdebugger.impl.ui.DebuggerFocusManager"
              os="windows"
              activeInHeadlessMode="false"/>
  </applicationListeners>

  <extensionPoints>
    <extensionPoint name="xdebugger.debuggerTabCustomizer"
                    interface="com.intellij.xdebugger.impl.ui.SessionTabComponentProvider" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.xdebugger.nodeLinkActionProvider" interface="com.intellij.xdebugger.impl.collection.visualizer.XDebuggerNodeLinkActionProvider" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.xdebugger.inlineValuePopupProvider"
                    interface="com.intellij.xdebugger.impl.inline.InlineValuePopupProvider" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.xdebugger.hotSwapUiExtension" interface="com.intellij.xdebugger.impl.hotswap.HotSwapUiExtension" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.xdebugger.customEvaluateHandler"
                    interface="com.intellij.xdebugger.impl.actions.handlers.XDebuggerCustomEvaluateHandler" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.xdebugger.customMuteBreakpointHandler"
                    interface="com.intellij.xdebugger.impl.actions.handlers.XDebuggerCustomMuteBreakpointHandler" dynamic="true"/>
    <extensionPoint name="xdebugger.customQuickEvaluateActionProvider"
                    interface="com.intellij.platform.debugger.impl.ui.actions.CustomQuickEvaluateActionProvider" dynamic="true"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <colorSettingsPage implementation="com.intellij.xdebugger.impl.ui.DebuggerColorsPage"/>

    <projectService serviceImplementation="com.intellij.xdebugger.impl.inline.DebuggerInlayListener"/>

    <applicationConfigurable groupId="build" dynamic="true" key="debugger.configurable.display.name" bundle="messages.XDebuggerBundle"
                             id="project.propDebugger" provider="com.intellij.xdebugger.impl.settings.DebuggerConfigurableProvider"/>

    <customizableActionGroupProvider implementation="com.intellij.xdebugger.impl.ui.XDebugTabCustomizableActionGroupProvider"/>

    <xdebugger.breakpointGroupingRule implementation="com.intellij.xdebugger.impl.breakpoints.ui.grouping.XBreakpointGroupingByTypeRule"/>
    <xdebugger.breakpointGroupingRule implementation="com.intellij.xdebugger.impl.breakpoints.ui.grouping.XBreakpointFileGroupingRule"/>
    <xdebugger.breakpointGroupingRule implementation="com.intellij.xdebugger.impl.breakpoints.ui.grouping.XBreakpointCustomGroupingRule"/>

    <xdebugger.configurableProvider implementation="com.intellij.xdebugger.impl.settings.XDebuggerConfigurableProvider" order="first"/>

    <copyPastePreProcessor implementation="com.intellij.xdebugger.impl.ui.DebuggerCopyPastePreprocessor"/>

    <statistics.counterUsagesCollector implementationClass="com.intellij.xdebugger.impl.evaluate.DebuggerEvaluationStatisticsCollector"/>
    <statistics.counterUsagesCollector implementationClass="com.intellij.xdebugger.impl.ui.XDebugThreadsFramesViewChangeCollector"/>
    <statistics.counterUsagesCollector
      implementationClass="com.intellij.xdebugger.impl.ui.visualizedtext.TextVisualizerStatisticsCollector"/>

    <editorActionHandler action="EditorUp" implementationClass="com.intellij.xdebugger.impl.actions.handlers.UpHandler"
                         id="smart-step-into-up"/>
    <editorActionHandler action="EditorDown" implementationClass="com.intellij.xdebugger.impl.actions.handlers.DownHandler"
                         id="smart-step-into-down"/>
    <editorActionHandler action="EditorLeft" implementationClass="com.intellij.xdebugger.impl.actions.handlers.LeftHandler"
                         id="smart-step-into-left"/>
    <editorActionHandler action="PrevParameter" implementationClass="com.intellij.xdebugger.impl.actions.handlers.LeftHandler"
                         id="smart-step-into-previous"/>
    <editorActionHandler action="EditorRight" implementationClass="com.intellij.xdebugger.impl.actions.handlers.RightHandler"
                         id="smart-step-into-right"/>
    <editorActionHandler action="NextParameter" implementationClass="com.intellij.xdebugger.impl.actions.handlers.RightHandler"
                         id="smart-step-into-next"/>
    <editorActionHandler action="EditorEnter"
                         implementationClass="com.intellij.xdebugger.impl.actions.handlers.XDebugSmartStepIntoEnterHandler"
                         order="first" id="smart-step-into-enter"/>
    <editorActionHandler action="EditorEscape" implementationClass="com.intellij.xdebugger.impl.actions.handlers.EscHandler"
                         order="before hide-search" id="smart-step-into-escape"/>

    <titleInfoProvider implementation="com.intellij.xdebugger.impl.ui.DebuggerTitleInfoProvider"/>

    <xdebugger.textValueVisualizer implementation="com.intellij.xdebugger.impl.ui.visualizedtext.common.HtmlTextVisualizer"/>
    <xdebugger.textValueVisualizer implementation="com.intellij.xdebugger.impl.ui.visualizedtext.common.XmlTextVisualizer"/>
    <xdebugger.textValueVisualizer implementation="com.intellij.xdebugger.impl.ui.visualizedtext.common.JsonTextVisualizer"/>
    <xdebugger.textValueVisualizer implementation="com.intellij.xdebugger.impl.ui.visualizedtext.common.JwtTextVisualizer"/>
    <xdebugger.textValueVisualizer implementation="com.intellij.xdebugger.impl.ui.visualizedtext.common.UrlEncodedTextVisualizer"/>

    <gutterMarkPreprocessor implementation="com.intellij.xdebugger.impl.breakpoints.BreakpointGutterIconMerge"/>
    <xdebugger.inlineValuePopupProvider implementation="com.intellij.xdebugger.impl.InlineTextValuePopupProvider"/>

    <projectService serviceImplementation="com.intellij.platform.debugger.impl.ui.evaluate.quick.common.ValueLookupManager"/>

    <bookmarksListProvider implementation="com.intellij.xdebugger.impl.breakpoints.BreakpointListProvider"/>
    <remote.customDataContextSerializer implementation="com.intellij.xdebugger.impl.ui.RunContentDescriptorKeySerializer"/>
    <remote.customDataContextSerializer implementation="com.intellij.xdebugger.impl.ui.ExecutionEnvironmentKeySerializer"/>
    <remote.customDataContextSerializer implementation="com.intellij.xdebugger.impl.ui.XDebuggerTreeSelectedValuesSerializer"/>
    <remote.customDataContextSerializer implementation="com.intellij.xdebugger.impl.ui.XDebuggerTreeSelectedStacksSerializer"/>
  </extensions>

  <actions resource-bundle="messages.XDebuggerUiBundle">
    <group id="XDebugger.Actions">
      <group id="XDebugger.Threads.View.Popup">
        <reference ref="Debugger.PopFrame"/>
      </group>


      <action id="Debugger.AddToWatch" class="com.intellij.xdebugger.impl.actions.AddToWatchesAction" icon="AllIcons.Debugger.AddToWatch">
        <add-to-group group-id="EditorPopupMenuDebug" anchor="after" relative-to-action="ForceRunToCursor"/>
      </action>
      <action id="Debugger.AddInlineWatch" class="com.intellij.xdebugger.impl.inline.AddInlineWatchAction"
              icon="AllIcons.Debugger.AddToWatch">
        <add-to-group group-id="EditorPopupMenuDebug" anchor="after" relative-to-action="Debugger.AddToWatch"/>
      </action>
      <action id="Debugger.EvaluateInConsole" class="com.intellij.xdebugger.impl.actions.EvaluateInConsoleAction">
        <add-to-group group-id="EditorPopupMenuDebug" anchor="after" relative-to-action="Debugger.AddInlineWatch"/>
      </action>

      <action id="XDebugger.Inspect" class="com.intellij.xdebugger.impl.ui.tree.actions.XInspectAction"/>
      <action id="Debugger.MarkObject" class="com.intellij.xdebugger.impl.actions.MarkObjectAction" use-shortcut-of="ToggleBookmark"/>
      <action id="XDebugger.SetValue" class="com.intellij.xdebugger.impl.ui.tree.actions.XSetValueAction"/>
      <action id="XDebugger.CopyValue" class="com.intellij.xdebugger.impl.ui.tree.actions.XCopyValueAction$Simple" use-shortcut-of="$Copy"/>
      <action id="XDebugger.CompareValueWithClipboard" class="com.intellij.xdebugger.impl.ui.tree.actions.XCompareWithClipboardAction"/>
      <action id="XDebugger.CopyName" class="com.intellij.xdebugger.impl.ui.tree.actions.XCopyNameAction"/>
      <action id="XDebugger.JumpToSource" class="com.intellij.xdebugger.impl.ui.tree.actions.XJumpToSourceAction"
              use-shortcut-of="EditSource"/>
      <action id="XDebugger.JumpToTypeSource" class="com.intellij.xdebugger.impl.ui.tree.actions.XJumpToTypeSourceAction"/>

      <action id="Debugger.Tree.EvaluateInConsole" class="com.intellij.xdebugger.impl.ui.tree.actions.EvaluateInConsoleFromTreeAction"/>

      <action id="XDebugger.NewWatch" class="com.intellij.xdebugger.impl.frame.actions.XNewWatchAction" icon="AllIcons.General.Add"/>
      <action id="XDebugger.EditWatch" class="com.intellij.xdebugger.impl.frame.actions.XEditWatchAction"
              use-shortcut-of="XDebugger.SetValue"/>
      <action id="XDebugger.CopyWatch" class="com.intellij.xdebugger.impl.frame.actions.XCopyWatchAction" icon="AllIcons.Actions.Copy"
              use-shortcut-of="EditorDuplicate"/>
      <action id="XDebugger.RemoveWatch" class="com.intellij.xdebugger.impl.frame.actions.XRemoveWatchAction" icon="AllIcons.General.Remove"
              use-shortcut-of="$Delete"/>
      <action id="XDebugger.MoveWatchUp" class="com.intellij.xdebugger.impl.frame.actions.XMoveWatchUp" use-shortcut-of="MoveLineUp"/>
      <action id="XDebugger.MoveWatchDown" class="com.intellij.xdebugger.impl.frame.actions.XMoveWatchDown" use-shortcut-of="MoveLineDown"/>
      <action id="XDebugger.SeparateWatches" class="com.intellij.xdebugger.impl.frame.actions.XSeparateWatchesAndVariables"
              icon="AllIcons.Debugger.Watch"/>
      <action id="XDebugger.PauseWatch" class="com.intellij.xdebugger.impl.frame.actions.XPauseWatchAction"/>
      <action id="XDebugger.ToggleEvaluateExpressionField"
              class="com.intellij.xdebugger.impl.frame.actions.XToggleEvaluateExpressionFieldAction"/>
      <action id="XDebugger.RemoveAllWatches" class="com.intellij.xdebugger.impl.frame.actions.XRemoveAllWatchesAction"/>
      <action id="XDebugger.MuteBreakpoints" class="com.intellij.xdebugger.impl.actions.MuteBreakpointAction"
              icon="AllIcons.Debugger.MuteBreakpoints"/>
      <action id="XDebugger.RemoveAllButThisBreakpoint" class="com.intellij.xdebugger.impl.actions.RemoveAllButThisBreakpointAction">
        <add-to-group group-id="EditorGutterPopupMenu" anchor="last"/>
      </action>
      <action id="XDebugger.DisableAllButThisBreakpoint" class="com.intellij.xdebugger.impl.actions.DisableAllButThisBreakpointAction">
        <add-to-group group-id="EditorGutterPopupMenu" anchor="last"/>
      </action>
      <action id="XDebugger.ToggleSortValues" class="com.intellij.xdebugger.impl.ui.tree.actions.SortValuesToggleAction"
              icon="AllIcons.ObjectBrowser.Sorted"/>
      <action id="Debugger.ShowReferring" class="com.intellij.xdebugger.impl.ui.tree.actions.ShowReferringObjectsAction"/>
      <action id="Debugger.ShowLibraryFrames" class="com.intellij.xdebugger.impl.actions.ShowLibraryFramesAction"/>
      <action id="Debugger.CopyStack" class="com.intellij.xdebugger.impl.frame.XDebuggerFramesList$CopyStackAction"
              icon="AllIcons.Actions.Copy"/>
      <action id="Debugger.FocusOnBreakpoint" class="com.intellij.xdebugger.impl.actions.FocusOnBreakpointAction"/>
      <action id="Debugger.FocusOnFinish" class="com.intellij.xdebugger.impl.actions.FocusOnFinishAction"/>
    </group>

    <group id="XDebugger.Settings" icon="AllIcons.General.GearPlain" popup="true">
      <action id="XDebugger.PreviewTab" class="com.intellij.xdebugger.impl.actions.OpenFilesInPreviewTabAction"/>
      <action id="XDebugger.Inline" class="com.intellij.xdebugger.impl.actions.UseInlineDebuggerAction"/>
      <separator/>
      <reference ref="XDebugger.ToggleSortValues"/>
      <separator/>
      <action id="XDebugger.UnmuteOnStop" class="com.intellij.xdebugger.impl.actions.UnmuteOnStopAction"/>
    </group>

    <group id="XDebugger.Hover.Breakpoint.Context.Menu">
      <action id="AddBreakpoint" class="com.intellij.xdebugger.impl.actions.handlers.AddLineBreakpointAction"/>
      <action id="AddConditionalBreakpoint" class="com.intellij.xdebugger.impl.actions.handlers.AddLineBreakpointAction$WithCondition"/>
      <action id="AddLoggingBreakpoint" class="com.intellij.xdebugger.impl.actions.handlers.AddLineBreakpointAction$WithLogging"/>
    </group>

    <action id="XDebugger.Show.Breakpoints.Over.Line.Numbers"
            class="com.intellij.xdebugger.impl.settings.ShowBreakpointsOverLineNumbersAction">
      <add-to-group group-id="EditorGutterPopupMenu.Appearance" anchor="after" relative-to-action="EditorGutterToggleGlobalLineNumbers"/>
    </action>

    <group id="XDebugger.ToolWindow.TopToolbar">
      <reference ref="ShowExecutionPoint"/>
      <separator/>
      <reference ref="StepOver.Ref"/>
      <reference ref="StepInto"/>
      <reference ref="StepOut"/>
      <reference ref="RunToCursor"/>
      <separator/>
      <reference ref="EvaluateExpression"/>
    </group>

    <group id="XDebugger.ToolWindow.TopToolbar3">
      <reference ref="Rerun"/>
      <reference ref="Stop"/>
      <separator/>
      <reference ref="Resume.Ref"/>
      <reference ref="Pause.Ref"/>
      <reference ref="StepOver.Ref"/>
      <reference ref="StepInto"/>
      <reference ref="StepOut"/>
      <separator/>
      <reference ref="ViewBreakpoints"/>
      <reference ref="XDebugger.MuteBreakpoints"/>
    </group>

    <group id="XDebugger.ToolWindow.TopToolbar3.Extra" class="com.intellij.openapi.actionSystem.impl.MoreActionGroup">
      <reference ref="ForceStepOver"/>
      <reference ref="ForceStepInto"/>
      <reference ref="SmartStepInto"/>
      <separator/>
      <reference ref="RunToCursor"/>
      <reference ref="ForceRunToCursor"/>
      <separator/>
      <reference ref="ShowExecutionPoint"/>
      <separator/>
      <reference ref="EvaluateExpression"/>
      <reference ref="Debugger.PopFrame"/>
    </group>

    <group id="XDebugger.ToolWindow.LeftToolbar">
      <separator/>
      <reference ref="Resume.Ref"/>
      <reference ref="Pause.Ref"/>
      <reference ref="Stop"/>
      <separator/>
      <reference ref="ViewBreakpoints"/>
      <reference ref="XDebugger.MuteBreakpoints"/>
    </group>

    <group id="XDebugger.ValueGroup" popup="false">
      <reference ref="XDebugger.Inspect"/>
      <reference ref="Debugger.MarkObject"/>
      <reference ref="XDebugger.SetValue"/>
      <reference ref="XDebugger.CopyValue"/>
      <reference ref="XDebugger.CompareValueWithClipboard"/>
      <reference ref="XDebugger.CopyName"/>
      <separator/>
      <reference ref="EvaluateExpression"/>
      <reference ref="Debugger.Tree.EvaluateInConsole"/>
      <reference ref="Debugger.AddToWatch"/>
      <reference ref="Debugger.ShowReferring"/>
      <separator/>
      <reference ref="XDebugger.JumpToSource"/>
      <reference ref="XDebugger.JumpToTypeSource"/>
      <separator/>
    </group>

    <action id="XDebugger.PinToTop" class="com.intellij.xdebugger.impl.pinned.items.actions.XDebuggerPinToTopAction">
      <add-to-group group-id="XDebugger.ValueGroup" anchor="last"/>
    </action>

    <group id="XDebugger.Evaluation.Dialog.Tree.Popup">
      <reference ref="XDebugger.ValueGroup"/>
    </group>

    <group id="XDebugger.Frames.Tree.Popup">
      <reference ref="Debugger.PopFrame"/>
      <reference ref="Debugger.CopyStack"/>
    </group>

    <group id="XDebugger.Frames.TopToolbar">
      <reference ref="Debugger.ShowLibraryFrames"/>
    </group>

    <group id="XDebugger.Variables.Tree.Popup">
      <reference ref="XDebugger.ValueGroup"/>
    </group>

    <group id="XDebugger.Variables.Tree.Toolbar">
    </group>

    <group id="XDebugger.Watches.Tree.Popup">
      <reference ref="XDebugger.NewWatch"/>
      <reference ref="XDebugger.RemoveWatch"/>
      <reference ref="XDebugger.RemoveAllWatches"/>
      <reference ref="XDebugger.EditWatch"/>
      <reference ref="XDebugger.PauseWatch"/>
      <separator/>
      <reference ref="XDebugger.ValueGroup"/>
    </group>

    <group id="XDebugger.Watches.Tree.Toolbar">
      <reference ref="XDebugger.NewWatch"/>
      <reference ref="XDebugger.RemoveWatch"/>
      <reference ref="XDebugger.MoveWatchUp"/>
      <reference ref="XDebugger.MoveWatchDown"/>
      <reference ref="XDebugger.CopyWatch"/>
    </group>

    <group id="XDebugger.Watches.Inline.Popup" popup="true">
    </group>

    <group id="XDebugger.Inspect.Tree.Popup">
      <reference ref="XDebugger.ValueGroup"/>
    </group>

    <group id="XDebugger.Evaluate.Code.Fragment.Editor.Popup">
      <reference ref="BasicEditorPopupMenu"/>
      <reference ref="EditorToggleUseSoftWraps"/>
    </group>

    <group id="XDebugger.Touchbar.Debug">
      <!--suppress PluginXmlI18n, PluginXmlCapitalization -->
      <separator text="type.small"/>
      <reference ref="XDebugger.MuteBreakpoints"/>
      <add-to-group group-id="TouchBarDebug" anchor="after" relative-to-action="Stop"/>
    </group>

    <group id="XDebugger.Code.Toolbar" class="com.intellij.xdebugger.impl.actions.DebuggerCodeToolbarGroup">
      <add-to-group group-id="Floating.CodeToolbar" anchor="after" relative-to-action="Floating.CodeToolbar.Surround"/>
      <separator/>
      <reference ref="EvaluateExpression"/>
      <reference ref="Debugger.AddToWatch"/>
    </group>

    <group id="ToolbarPopupActions.XDebugger.ToolWindow.TopToolbar3">
      <group id="DebugToolbarQuickActions" class="com.intellij.xdebugger.impl.actions.DebuggerToolbarQuickActionsGroup" searchable="false"
             popup="true"/>
    </group>
  </actions>

  <projectListeners>
    <listener class="com.intellij.xdebugger.impl.ExecutionPointManagerChangeListener"
              topic="com.intellij.xdebugger.impl.XDebuggerManagerProxyListener"/>
  </projectListeners>
</idea-plugin>
