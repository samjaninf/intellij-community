from typing import overload, Any, Literal

class Animal: ...
class Dog(Animal): ...

class Test:
    @overload
    def <warning descr="This overload overlaps overload 2 with incompatible return type">feed</warning>(self, a: Dog) -> str: ...

    @overload
    def feed(self, a: Animal) -> int: ...

    def feed(self, a: Any) -> Any: ...

class WithDefault:
    @overload
    def <warning descr="This overload overlaps overload 2 with incompatible return type">foo</warning>(self, x: int) -> str: ...

    @overload
    def foo(self, x: int, y: int = 10) -> int: ...

    def foo(self, x: int, y: int = 10) -> Any: ...

class UnionNone:
    @overload
    def <warning descr="This overload overlaps overload 2 with incompatible return type">foo</warning>(self, a: int) -> int: ...

    @overload
    def foo(self, a: int | None) -> str: ...

    def foo(self, a: Any) -> Any: ...

class TestWithObject:
    @overload
    def <warning descr="This overload overlaps overload 2 with incompatible return type">foo</warning>(self, a: int) -> int: ...

    @overload
    def foo(self, a: object) -> str: ...

    def foo(self, a: Any) -> Any: ...

class ResponseHandler:
    @overload
    def <warning descr="This overload overlaps overload 2 with incompatible return type">foo</warning>(self, a: Literal[True]) -> Literal["True"]: ...

    @overload
    def foo(self, a: bool) -> Literal["False"]: ...

    def foo(self, a: Any) -> Any: ...

class MultiLevel:
    @overload
    def <warning descr="This overload overlaps overload 3 with incompatible return type">logic</warning>(self, a: Literal["A"]) -> int: ...

    @overload
    def <warning descr="This overload overlaps overload 3 with incompatible return type">logic</warning>(self, a: Literal["A", "B"]) -> float: ...

    @overload
    def logic(self, a: str) -> str: ...

    def logic(self, a: Any) -> Any: ...